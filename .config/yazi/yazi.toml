[preview]
image_quality = 90
max_width = 65535
max_height = 65535


[tasks]
micro_workers    = 10
macro_workers    = 10
bizarre_retry    = 3
image_bound      = [ 65535, 65535 ]
suppress_preload = false
image_alloc      = 1073741824        # = 1024*1024*1024 = 1024MB

[plugin]
  prepend_preloaders = [
    # Replace magick, image, video with mediainfo
    { mime = "{audio,video,image}/*", run = "mediainfo" },
    { mime = "application/subrip", run = "mediainfo" },
    # Adobe Illustrator, Adobe Photoshop is image/adobe.photoshop, already handled above
    { mime = "application/postscript", run = "mediainfo" },
  ]
  prepend_previewers = [
    # Replace magick, image, video with mediainfo
    { mime = "{audio,video,image}/*", run = "mediainfo"},
    { mime = "application/subrip", run = "mediainfo" },
    # Adobe Illustrator, Adobe Photoshop is image/adobe.photoshop, already handled above
    { mime = "application/postscript", run = "mediainfo" },
  ]
  # There are more extensions which are supported by mediainfo.
  # Just add file's MIME type to `previewers`, `preloaders` above.
  # https://mediaarea.net/en/MediaInfo/Support/Formats

# For a large file like Adobe Illustrator, Adobe Photoshop, etc
# you may need to increase the memory limit if no image is rendered.
# https://yazi-rs.github.io/docs/configuration/yazi#tasks


[open]
prepend_rules = [
  { mime = "image/*", use = [ "feh" ] },
]

[opener]
feh = [
  { run = "feh -B '#0e1514' --scale-down --geometry 1600x900 \"$1\"", desc = "Open image with feh", for = "unix" },
]
